{% extends 'base.html.twig' %}

{% block body %}
    <div class="accordion" id="detail-groups-accordion">
        {% for product_category in product_categories %}
            <div class="accordion-item">
                <h2 class="accordion-header" id="heading{{ loop.index }}">
                    <button class="accordion-button{{ loop.index == 1 ? '' : ' collapsed' }}" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ loop.index }}" aria-expanded="{{ loop.index == 1 ? 'true' : 'false' }}" aria-controls="collapse{{ loop.index }}">
                        {{ product_category }}
                    </button>
                </h2>
                <div id="collapse{{ loop.index }}" class="accordion-collapse collapse{{ loop.index == 1 ? ' show' : '' }}" aria-labelledby="heading{{ loop.index }}" data-bs-parent="#detail-groups-accordion">
                    <div class="accordion-body">
                        {% for product in products %}
                            {% if product.category == product_category %}
                                {% include 'pieces/product_card.html.twig' with { 'product': product } %}
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}